From ebiederm@xmission.com  Thu Apr 29 12:42:22 2010
From: ebiederm@xmission.com (Eric W. Biederman)
Date: Tue, 30 Mar 2010 16:50:26 -0700
Subject: sysfs: Remove double free sysfs_get_sb
To: Eric Dumazet <eric.dumazet@gmail.com>
Cc: Greg Kroah-Hartman <gregkh@suse.de>, Kay Sievers <kay.sievers@vrfy.org>, linux-kernel@vger.kernel.org, Tejun Heo <tj@kernel.org>, Cornelia Huck <cornelia.huck@de.ibm.com>, linux-fsdevel@vger.kernel.org, Benjamin LaHaise <bcrl@lhnet.ca>, Serge Hallyn <serue@us.ibm.com>, netdev@vger.kernel.org
Message-ID: <m1zl1pbc8t.fsf_-_@fess.ebiederm.org>



Signed-off-by: Eric W. Biederman <ebiederm@aristanetworks.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 fs/sysfs/mount.c |    1 -
 1 file changed, 1 deletion(-)

--- a/fs/sysfs/mount.c
+++ b/fs/sysfs/mount.c
@@ -104,7 +104,6 @@ static int sysfs_get_sb(struct file_syst
 	if (IS_ERR(sb) || sb->s_fs_info != info)
 		kfree(info);
 	if (IS_ERR(sb)) {
-		kfree(info);
 		error = PTR_ERR(sb);
 		goto out;
 	}
