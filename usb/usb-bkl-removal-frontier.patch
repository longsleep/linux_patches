From oliver@neukum.org  Fri Jan 15 15:12:03 2010
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 14 Jan 2010 16:13:46 +0100
Subject: USB: BKL removal: frontier
Message-ID: <201001141613.46553.oliver@neukum.org>


From: Oliver Neukum <oliver@neukum.org>

BKL was not needed at all. Removed without replacement.

Signed-off-by: Oliver Neukum <oliver@neukum.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/frontier/alphatrack.c |    3 ---
 drivers/staging/frontier/tranzport.c  |    3 ---
 2 files changed, 6 deletions(-)

--- a/drivers/staging/frontier/alphatrack.c
+++ b/drivers/staging/frontier/alphatrack.c
@@ -41,7 +41,6 @@
 #include <linux/mutex.h>
 
 #include <linux/uaccess.h>
-#include <linux/smp_lock.h>
 #include <linux/input.h>
 #include <linux/usb.h>
 #include <linux/poll.h>
@@ -326,7 +325,6 @@ static int usb_alphatrack_open(struct in
 	int retval = 0;
 	struct usb_interface *interface;
 
-	lock_kernel();
 	nonseekable_open(inode, file);
 	subminor = iminor(inode);
 
@@ -396,7 +394,6 @@ unlock_exit:
 
 unlock_disconnect_exit:
 	mutex_unlock(&disconnect_mutex);
-	unlock_kernel();
 
 	return retval;
 }
--- a/drivers/staging/frontier/tranzport.c
+++ b/drivers/staging/frontier/tranzport.c
@@ -40,7 +40,6 @@
 #include <linux/mutex.h>
 
 #include <linux/uaccess.h>
-#include <linux/smp_lock.h>
 #include <linux/input.h>
 #include <linux/usb.h>
 #include <linux/poll.h>
@@ -344,7 +343,6 @@ static int usb_tranzport_open(struct ino
 	int retval = 0;
 	struct usb_interface *interface;
 
-	lock_kernel();
 	nonseekable_open(inode, file);
 	subminor = iminor(inode);
 
@@ -415,7 +413,6 @@ unlock_exit:
 
 unlock_disconnect_exit:
 	mutex_unlock(&disconnect_mutex);
-	unlock_kernel();
 
 	return retval;
 }
