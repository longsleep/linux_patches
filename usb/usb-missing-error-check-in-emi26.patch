From oliver@neukum.org  Thu Oct 25 12:01:36 2007
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 25 Oct 2007 15:38:44 +0200
Subject: USB: missing error check in emi26
To: greg@kroah.com, linux-usb-devel@lists.sourceforge.net
Message-ID: <200710251538.44855.oliver@neukum.org>
Content-Disposition: inline


this drivers lacks an error check.

Signed-off-by: Oliver Neukum <oneukum@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/misc/emi26.c |    4 ++++
 1 file changed, 4 insertions(+)

--- a/drivers/usb/misc/emi26.c
+++ b/drivers/usb/misc/emi26.c
@@ -114,6 +114,10 @@ static int emi26_load_firmware (struct u
 
 	/* De-assert reset (let the CPU run) */
 	err = emi26_set_reset(dev,0);
+	if (err < 0) {
+		err("%s - error loading firmware: error = %d", __FUNCTION__, err);
+		goto wraperr;
+	}
 	msleep(250);	/* let device settle */
 
 	/* 2. We upload the FPGA firmware into the EMI
