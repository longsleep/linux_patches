From oliver@neukum.org  Fri Jan 15 14:59:08 2010
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 14 Jan 2010 16:08:42 +0100
Subject: USB: BKL removal: usbtmc
Message-ID: <201001141608.42267.oliver@neukum.org>


From: Oliver Neukum <oliver@neukum.org>

BKL not needed at all. Removed without replacement.

Signed-off-by: Oliver Neukum <oliver@neukum.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/class/usbtmc.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/usb/class/usbtmc.c
+++ b/drivers/usb/class/usbtmc.c
@@ -26,7 +26,6 @@
 #include <linux/uaccess.h>
 #include <linux/kref.h>
 #include <linux/mutex.h>
-#include <linux/smp_lock.h>
 #include <linux/usb.h>
 #include <linux/usb/tmc.h>
 
@@ -114,7 +113,6 @@ static int usbtmc_open(struct inode *ino
 	struct usbtmc_device_data *data;
 	int retval = 0;
 
-	lock_kernel();
 	intf = usb_find_interface(&usbtmc_driver, iminor(inode));
 	if (!intf) {
 		printk(KERN_ERR KBUILD_MODNAME
@@ -130,7 +128,6 @@ static int usbtmc_open(struct inode *ino
 	filp->private_data = data;
 
 exit:
-	unlock_kernel();
 	return retval;
 }
 
