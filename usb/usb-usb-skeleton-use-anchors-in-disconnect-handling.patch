From oneukum@suse.de Mon Jun 11 06:10:57 2007
From: Oliver Neukum <oneukum@suse.de>
Date: Mon, 11 Jun 2007 14:54:02 +0200
Subject: USB: usb-skeleton: use anchors in disconnect handling
To: Greg KH <gregkh@suse.de>, linux-usb-devel@lists.sourceforge.net
Message-ID: <200706111454.02402.oneukum@suse.de>
Content-Disposition: inline


use anchors in disconnect handling

Signed-off-by: Oliver Neukum <oneukum@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/usb-skeleton.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/usb/usb-skeleton.c
+++ b/drivers/usb/usb-skeleton.c
@@ -420,6 +420,8 @@ static void skel_disconnect(struct usb_i
 	dev->interface = NULL;
 	mutex_unlock(&dev->io_mutex);
 
+	usb_kill_anchored_urbs(&dev->submitted);
+
 	/* decrement our usage count */
 	kref_put(&dev->kref, skel_delete);
 
