From oliver@neukum.org  Fri Jan 15 15:07:26 2010
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 14 Jan 2010 16:11:32 +0100
Subject: USB: BKL removal: adutux
Message-ID: <201001141611.32315.oliver@neukum.org>


From: Oliver Neukum <oliver@neukum.org>

BKL was not needed at all. Removed without replacement.

Signed-off-by: Oliver Neukum <oliver@neukum.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/misc/adutux.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/usb/misc/adutux.c
+++ b/drivers/usb/misc/adutux.c
@@ -25,7 +25,6 @@
 #include <linux/module.h>
 #include <linux/usb.h>
 #include <linux/mutex.h>
-#include <linux/smp_lock.h>
 #include <asm/uaccess.h>
 
 #ifdef CONFIG_USB_DEBUG
@@ -275,7 +274,6 @@ static int adu_open(struct inode *inode,
 
 	dbg(2,"%s : enter", __func__);
 
-	lock_kernel();
 	subminor = iminor(inode);
 
 	if ((retval = mutex_lock_interruptible(&adutux_mutex))) {
@@ -334,7 +332,6 @@ static int adu_open(struct inode *inode,
 exit_no_device:
 	mutex_unlock(&adutux_mutex);
 exit_no_lock:
-	unlock_kernel();
 	dbg(2,"%s : leave, return value %d ", __func__, retval);
 	return retval;
 }
