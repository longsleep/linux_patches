From oliver@neukum.org  Fri Jan 15 14:58:23 2010
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 14 Jan 2010 16:07:37 +0100
Subject: usb: BKL removal: usblp
Message-ID: <201001141607.37769.oliver@neukum.org>

From: Oliver Neukum <oliver@neukum.org>

BKL was not needed at all. Removed without replacement.

Signed-off-by: Oliver Neukum <oliver@neukum.org>
Acked-by: Pete Zaitcev <zaitcev@redhat.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/class/usblp.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/usb/class/usblp.c
+++ b/drivers/usb/class/usblp.c
@@ -56,7 +56,6 @@
 #include <linux/slab.h>
 #include <linux/lp.h>
 #include <linux/mutex.h>
-#include <linux/smp_lock.h>
 #undef DEBUG
 #include <linux/usb.h>
 
@@ -396,7 +395,6 @@ static int usblp_open(struct inode *inod
 	if (minor < 0)
 		return -ENODEV;
 
-	lock_kernel();
 	mutex_lock (&usblp_mutex);
 
 	retval = -ENODEV;
@@ -436,7 +434,6 @@ static int usblp_open(struct inode *inod
 	}
 out:
 	mutex_unlock (&usblp_mutex);
-	unlock_kernel();
 	return retval;
 }
 
