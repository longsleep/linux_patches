From alan@lxorguk.ukuu.org.uk Wed Aug 22 15:03:01 2007
From: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date: Wed, 22 Aug 2007 23:11:06 +0100
Subject: USB: oti6858: Remove broken ioctl code in -mm tree and also the broken fixes
To: akpm@osdl.org, linux-kernel@vger.kernel.org, linux-usb-devel@lists.sourceforge.net, greg@kroah.com
Message-ID: <20070822231106.38097b83@the-village.bc.nu>


This stuff is simply not needed.

Signed-off-by: Alan Cox <alan@redhat.com>
Cc: stable <stable@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/serial/oti6858.c |   15 ---------------
 1 file changed, 15 deletions(-)

--- a/drivers/usb/serial/oti6858.c
+++ b/drivers/usb/serial/oti6858.c
@@ -817,21 +817,6 @@ static int oti6858_ioctl(struct usb_seri
 				__FUNCTION__, port->number, cmd, arg);
 
 	switch (cmd) {
-		case TCGETS:
-			if (kernel_termios_to_user_termios((struct ktermios __user *)arg,
-							   port->tty->termios))
-				return -EFAULT;
-			return 0;
-
-		case TCSETS:
-		case TCSETSW:	/* FIXME: this is not the same! */
-		case TCSETSF:	/* FIXME: this is not the same! */
-			if (user_termios_to_kernel_termios(port->tty->termios,
-						(struct ktermios __user *)arg))
-				return -EFAULT;
-			oti6858_set_termios(port, NULL);
-			return 0;
-
 		case TCFLSH:
 			/* FIXME */
 			return 0;
