From D.Barow@option.com  Tue Aug 19 17:52:26 2008
From: Denis Joseph Barrow <D.Barow@option.com>
Date: Mon, 18 Aug 2008 11:42:00 +0200
Subject: hso: dev_kfree_skb crash fix
To: Linux USB kernel mailing list <linux-usb@vger.kernel.org>
Message-ID: <48A943E8.6090202@option.com>

Fixes dev_kfree_skb happening too many times when hso_start_net_device
is called from hso_resume.

Signed-off-by: Denis Joseph Barrow <D.Barow@option.com>
Cc: Jeff Garzik <jgarzik@pobox.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/net/usb/hso.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/net/usb/hso.c
+++ b/drivers/net/usb/hso.c
@@ -2613,6 +2613,7 @@ static int hso_resume(struct usb_interfa
 					"Transmitting lingering data\n");
 				hso_net_start_xmit(hso_net->skb_tx_buf,
 						   hso_net->net);
+				hso_net->skb_tx_buf = NULL;
 			}
 			result = hso_start_net_device(network_table[i]);
 			if (result)
