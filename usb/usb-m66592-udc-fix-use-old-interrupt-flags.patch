From shimoda.yoshihiro@renesas.com Wed May 30 06:06:09 2007
From: Yoshihiro Shimoda <shimoda.yoshihiro@renesas.com>
Date: Wed, 30 May 2007 22:06:00 +0900
Subject: USB: m66592-udc: fix use old interrupt flags
To: greg@kroah.com, linux-usb-devel@lists.sourceforge.net
Message-ID: <465D76B8.4020906@renesas.com>


This patch fixes the problem that used SA_* flags.

Signed-off-by: Yoshihiro Shimoda <shimoda.yoshihiro@renesas.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/gadget/m66592-udc.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/usb/gadget/m66592-udc.c
+++ b/drivers/usb/gadget/m66592-udc.c
@@ -44,7 +44,7 @@ MODULE_DESCRIPTION("M66592 USB gadget dr
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Yoshihiro Shimoda");
 
-#define DRIVER_VERSION	"9 May 2007"
+#define DRIVER_VERSION	"29 May 2007"
 
 /* module parameters */
 static unsigned short clock = M66592_XTAL24;
@@ -1567,7 +1567,7 @@ static int __init m66592_probe(struct pl
 
 	m66592->bi_bufnum = M66592_BASE_BUFNUM;
 
-	ret = request_irq(irq, m66592_irq, SA_INTERRUPT | SA_SHIRQ,
+	ret = request_irq(irq, m66592_irq, IRQF_DISABLED | IRQF_SHARED,
 			  udc_name, m66592);
 	if (ret < 0) {
 		printk(KERN_ERR "request_irq error (%d)\n", ret);
