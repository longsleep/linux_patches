From Uwe.Kleine-Koenig@digi.com  Wed Aug 20 13:44:18 2008
From: Uwe Kleine-König <Uwe.Kleine-Koenig@digi.com>
Date: Fri, 11 Jul 2008 11:10:36 +0200
Subject: UIO: uio_pdrv: fix memory leak
To: Greg KH <greg@kroah.com>, "Hans J. Koch" <hjk@linutronix.de>
Cc: Magnus Damm <magnus.damm@gmail.com>, <linux-kernel@vger.kernel.org>
Message-ID: <1215767437-20583-2-git-send-email-Uwe.Kleine-Koenig@digi.com>


Thanks to Magnus Damm for pointing that out.

Signed-off-by: Uwe Kleine-König <Uwe.Kleine-Koenig@digi.com>
Cc: Magnus Damm <magnus.damm@gmail.com>
Acked-by: Hans J. Koch <hjk@linutronix.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/uio/uio_pdrv.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/uio/uio_pdrv.c
+++ b/drivers/uio/uio_pdrv.c
@@ -88,6 +88,8 @@ static int uio_pdrv_remove(struct platfo
 
 	uio_unregister_device(pdata->uioinfo);
 
+	kfree(pdata);
+
 	return 0;
 }
 
