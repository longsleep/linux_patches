From a.beregalov@gmail.com  Tue Jun 23 08:34:41 2009
From: Alexander Beregalov <a.beregalov@gmail.com>
Date: Tue, 23 Jun 2009 17:50:06 +0400
Subject: wm97xx_batery: replace driver_data with dev_get_drvdata()
To: <rmk+kernel@arm.linux.org.uk>
Cc: gregkh@suse.de, Alexander Beregalov <a.beregalov@gmail.com>
Message-ID: <1245765006-10863-1-git-send-email-a.beregalov@gmail.com>


direct access of driver_data is going away.

Signed-off-by: Alexander Beregalov <a.beregalov@gmail.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/power/wm97xx_battery.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/power/wm97xx_battery.c
+++ b/drivers/power/wm97xx_battery.c
@@ -33,14 +33,14 @@ static enum power_supply_property *prop;
 
 static unsigned long wm97xx_read_bat(struct power_supply *bat_ps)
 {
-	return wm97xx_read_aux_adc(bat_ps->dev->parent->driver_data,
+	return wm97xx_read_aux_adc(dev_get_drvdata(bat_ps->dev->parent),
 					pdata->batt_aux) * pdata->batt_mult /
 					pdata->batt_div;
 }
 
 static unsigned long wm97xx_read_temp(struct power_supply *bat_ps)
 {
-	return wm97xx_read_aux_adc(bat_ps->dev->parent->driver_data,
+	return wm97xx_read_aux_adc(dev_get_drvdata(bat_ps->dev->parent),
 					pdata->temp_aux) * pdata->temp_mult /
 					pdata->temp_div;
 }
