From owner-linux-pci@atrey.karlin.mff.cuni.cz Mon Aug 27 16:18:19 2007
From: Auke Kok <auke-jan.h.kok@intel.com>
Date: Mon, 27 Aug 2007 16:18:10 -0700
Subject: PCI: quirk_vt82c586_acpi: Omit reading PCI revision ID
To: gregkh@suse.de
Cc: linux-pci@atrey.karlin.mff.cuni.cz
Message-ID: <20070827231802.27448.87490.stgit@localhost.localdomain>


Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/pci/quirks.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

--- a/drivers/pci/quirks.c
+++ b/drivers/pci/quirks.c
@@ -469,11 +469,9 @@ DECLARE_PCI_FIXUP_HEADER(PCI_VENDOR_ID_I
  */
 static void __devinit quirk_vt82c586_acpi(struct pci_dev *dev)
 {
-	u8 rev;
 	u32 region;
 
-	pci_read_config_byte(dev, PCI_CLASS_REVISION, &rev);
-	if (rev & 0x10) {
+	if (dev->revision & 0x10) {
 		pci_read_config_dword(dev, 0x48, &region);
 		region &= PCI_BASE_ADDRESS_IO_MASK;
 		quirk_io_region(dev, region, 256, PCI_BRIDGE_RESOURCES, "vt82c586 ACPI");
