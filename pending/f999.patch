---
 drivers/base/firmware.c |   22 ++++------------------
 drivers/firmware/edd.c  |    1 +
 include/linux/device.h  |    4 +---
 3 files changed, 6 insertions(+), 21 deletions(-)

--- a/drivers/base/firmware.c
+++ b/drivers/base/firmware.c
@@ -3,11 +3,11 @@
  *
  * Copyright (c) 2002-3 Patrick Mochel
  * Copyright (c) 2002-3 Open Source Development Labs
+ * Copyright (c) 2007 Greg Kroah-Hartman <gregkh@suse.de>
+ * Copyright (c) 2007 Novell Inc.
  *
  * This file is released under the GPLv2
- *
  */
-
 #include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/init.h>
@@ -16,19 +16,8 @@
 
 #include "base.h"
 
-static struct kset *firmware_kset;
-
-int firmware_register(struct kset *s)
-{
-	s->kobj.kset = firmware_kset;
-	s->kobj.ktype = NULL;
-	return subsystem_register(s);
-}
-
-void firmware_unregister(struct kset *s)
-{
-	subsystem_unregister(s);
-}
+struct kset *firmware_kset;
+EXPORT_SYMBOL(firmware_kset);
 
 int __init firmware_init(void)
 {
@@ -37,6 +26,3 @@ int __init firmware_init(void)
 		return PTR_ERR(firmware_kset);
 	return 0;
 }
-
-EXPORT_SYMBOL_GPL(firmware_register);
-EXPORT_SYMBOL_GPL(firmware_unregister);
--- a/drivers/firmware/edd.c
+++ b/drivers/firmware/edd.c
@@ -756,6 +756,7 @@ edd_init(void)
 		return 1;
 	}
 
+	edd_subsys->
 	rc = firmware_register(&edd_subsys);
 	if (rc)
 		return rc;
--- a/include/linux/device.h
+++ b/include/linux/device.h
@@ -543,10 +543,8 @@ extern void device_shutdown(void);
 /* drivers/base/sys.c */
 extern void sysdev_shutdown(void);
 
-
 /* drivers/base/firmware.c */
-extern int __must_check firmware_register(struct kset *);
-extern void firmware_unregister(struct kset *);
 
 /* debugging and troubleshooting/diagnostic helpers. */
 extern const char *dev_driver_string(struct device *dev);
