From: Greg Kroah-Hartman <gregkh@suse.de>
Subject: Make put_device() warn that it will sleep

This makes scsi emit messages all over the place...
But it's something that we need to fix up.

Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/base/core.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@ -824,6 +824,7 @@ struct device * get_device(struct device
  */
 void put_device(struct device * dev)
 {
+	/* might_sleep(); */
 	if (dev)
 		kobject_put(&dev->kobj);
 }
