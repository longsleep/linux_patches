From a.beregalov@gmail.com  Tue Apr 21 15:46:32 2009
From: Alexander Beregalov <a.beregalov@gmail.com>
Date: Sat, 11 Apr 2009 23:01:21 +0400
Subject: Staging: agnx: replace print_mac with %pM
To: gregkh@suse.de
Message-ID: <20090411190121.GA18885@orion>
Content-Disposition: inline




Signed-off-by: Alexander Beregalov <a.beregalov@gmail.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/agnx/debug.h |    9 ++++-----
 drivers/staging/agnx/pci.c   |    8 +++-----
 2 files changed, 7 insertions(+), 10 deletions(-)

--- a/drivers/staging/agnx/debug.h
+++ b/drivers/staging/agnx/debug.h
@@ -312,7 +312,6 @@ static inline void dump_ieee80211_hdr(st
 {
 	u16 fctl;
 	int hdrlen;
-	DECLARE_MAC_BUF(mac);
 
 	fctl = le16_to_cpu(hdr->frame_control);
 	switch (fctl & IEEE80211_FCTL_FTYPE) {
@@ -375,13 +374,13 @@ static inline void dump_ieee80211_hdr(st
 		printk("FC=0x%04x DUR=0x%04x",
 		       fctl, le16_to_cpu(hdr->duration_id));
 	if (hdrlen >= 10)
-		printk(" A1=%s", print_mac(mac, hdr->addr1));
+		printk(" A1=%pM", hdr->addr1);
 	if (hdrlen >= 16)
-		printk(" A2=%s", print_mac(mac, hdr->addr2));
+		printk(" A2=%pM", hdr->addr2);
 	if (hdrlen >= 24)
-		printk(" A3=%s", print_mac(mac, hdr->addr3));
+		printk(" A3=%pM", hdr->addr3);
 	if (hdrlen >= 30)
-		printk(" A4=%s", print_mac(mac, hdr->addr4));
+		printk(" A4=%pM", hdr->addr4);
 	printk("\n");
 }
 
--- a/drivers/staging/agnx/pci.c
+++ b/drivers/staging/agnx/pci.c
@@ -150,8 +150,7 @@ static int agnx_get_mac_address(struct a
 	*((u32 *)(priv->mac_addr + 2)) = cpu_to_le32(reg);
 
 	if (!is_valid_ether_addr(priv->mac_addr)) {
-		DECLARE_MAC_BUF(mbuf);
-		printk(KERN_WARNING PFX "read mac %s\n", print_mac(mbuf, priv->mac_addr));
+		printk(KERN_WARNING PFX "read mac %pM\n", priv->mac_addr);
 		printk(KERN_WARNING PFX "Invalid hwaddr! Using random hwaddr\n");
 		random_ether_addr(priv->mac_addr);
 	}
@@ -456,7 +455,6 @@ static int __devinit agnx_pci_probe(stru
 	struct ieee80211_hw *dev;
 	struct agnx_priv *priv;
 	int err;
-	DECLARE_MAC_BUF(mac);
 
 	err = pci_enable_device(pdev);
 	if (err) {
@@ -550,9 +548,9 @@ static int __devinit agnx_pci_probe(stru
 
 	agnx_hw_reset(priv);
 
-	dev_info(&pdev->dev, "%s: hwaddr %s, Rev 0x%02x\n",
+	dev_info(&pdev->dev, "%s: hwaddr %pM, Rev 0x%02x\n",
 		wiphy_name(dev->wiphy),
-		print_mac(mac, dev->wiphy->perm_addr), priv->revid);
+		dev->wiphy->perm_addr, priv->revid);
 	return 0;
 
  err_iounmap:
