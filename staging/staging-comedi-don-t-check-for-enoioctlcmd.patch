From shawn.bohrer@gmail.com  Mon Oct 19 14:40:41 2009
From: Shawn Bohrer <shawn.bohrer@gmail.com>
Date: Sun, 18 Oct 2009 15:32:17 -0500
Subject: Staging: comedi: Don't check for -ENOIOCTLCMD
To: Greg Kroah-Hartman <gregkh@suse.de>
Cc: devel@driverdev.osuosl.org, Shawn Bohrer <shawn.bohrer@gmail.com>
Message-ID: <1255897939-9247-3-git-send-email-shawn.bohrer@gmail.com>


unlocked_ioctl() never returns -ENOIOCTLCMD so remove the check.

Signed-off-by: Shawn Bohrer <shawn.bohrer@gmail.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/comedi/comedi_compat32.c |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

--- a/drivers/staging/comedi/comedi_compat32.c
+++ b/drivers/staging/comedi/comedi_compat32.c
@@ -97,12 +97,9 @@ static int translated_ioctl(struct file
 	if (!file->f_op)
 		return -ENOTTY;
 
-	if (file->f_op->unlocked_ioctl) {
-		int rc = (int)(*file->f_op->unlocked_ioctl) (file, cmd, arg);
-		if (rc == -ENOIOCTLCMD)
-			rc = -ENOTTY;
-		return rc;
-	}
+	if (file->f_op->unlocked_ioctl)
+		return file->f_op->unlocked_ioctl(file, cmd, arg);
+
 	return -ENOTTY;
 }
 
