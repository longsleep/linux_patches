From alan@linux.intel.com  Thu Aug 20 14:38:24 2009
From: Alan Cox <alan@linux.intel.com>
Date: Wed, 19 Aug 2009 17:52:08 +0100
Subject: Staging: pohmelfs: fix type errors
To: greg@kroah.com, linux-kernel@vger.kernel.org
Message-ID: <20090819165207.14632.3743.stgit@localhost.localdomain>


Signed-off-by: Alan Cox <alan@linux.intel.com>
Cc: Evgeniy Polyakov <zbr@ioremap.net>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/pohmelfs/config.c |    3 +--
 drivers/staging/pohmelfs/dir.c    |    2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

--- a/drivers/staging/pohmelfs/config.c
+++ b/drivers/staging/pohmelfs/config.c
@@ -446,9 +446,8 @@ out_unlock:
 	return err;
 }
 
-static void pohmelfs_cn_callback(void *data)
+static void pohmelfs_cn_callback(struct cn_msg *msg)
 {
-	struct cn_msg *msg = data;
 	int err;
 
 	switch (msg->flags) {
--- a/drivers/staging/pohmelfs/dir.c
+++ b/drivers/staging/pohmelfs/dir.c
@@ -412,7 +412,7 @@ static int pohmelfs_readdir(struct file 
 				__func__, file->f_pos, pi->ino, n->data, n->len,
 				n->ino, n->mode, mode, file->f_pos, n->hash);
 
-		file->private_data = (void *)n->hash;
+		file->private_data = (void *)(unsigned long)n->hash;
 
 		len = n->len;
 		err = filldir(dirent, n->data, n->len, file->f_pos, n->ino, mode);
