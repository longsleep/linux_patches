From wfp5p@virginia.edu Mon Mar 16 17:20:47 2009
From: Bill Pemberton <wfp5p@virginia.edu>
Date: Mon, 16 Mar 2009 22:05:59 -0400
Subject: Staging: comedi: Remove comedi_insnlist typedef
To: greg@kroah.com
Message-ID: <20090317020558.14467.8536.stgit@viridian.itc.Virginia.EDU>


Signed-off-by: Bill Pemberton <wfp5p@virginia.edu>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---

 drivers/staging/comedi/comedi.h          |    5 ++---
 drivers/staging/comedi/comedi_compat32.c |    2 +-
 drivers/staging/comedi/comedi_fops.c     |    4 ++--
 3 files changed, 5 insertions(+), 6 deletions(-)

--- a/drivers/staging/comedi/comedi_compat32.c
+++ b/drivers/staging/comedi/comedi_compat32.c
@@ -361,7 +361,7 @@ static int get_compat_insn(struct comedi
 static int compat_insnlist(struct file *file, unsigned long arg)
 {
 	struct combined_insnlist {
-		comedi_insnlist insnlist;
+		struct comedi_insnlist insnlist;
 		struct comedi_insn insn[1];
 	} __user *s;
 	struct comedi32_insnlist_struct __user *insnlist32;
--- a/drivers/staging/comedi/comedi_fops.c
+++ b/drivers/staging/comedi/comedi_fops.c
@@ -628,13 +628,13 @@ static int parse_insn(struct comedi_devi
 #define MAX_SAMPLES 256
 static int do_insnlist_ioctl(struct comedi_device *dev, void *arg, void *file)
 {
-	comedi_insnlist insnlist;
+	struct comedi_insnlist insnlist;
 	struct comedi_insn *insns = NULL;
 	unsigned int *data = NULL;
 	int i = 0;
 	int ret = 0;
 
-	if (copy_from_user(&insnlist, arg, sizeof(comedi_insnlist)))
+	if (copy_from_user(&insnlist, arg, sizeof(struct comedi_insnlist)))
 		return -EFAULT;
 
 	data = kmalloc(sizeof(unsigned int) * MAX_SAMPLES, GFP_KERNEL);
--- a/drivers/staging/comedi/comedi.h
+++ b/drivers/staging/comedi/comedi.h
@@ -302,7 +302,7 @@ enum comedi_support_level {
 #define COMEDI_RANGEINFO _IOR(CIO, 8, comedi_rangeinfo)
 #define COMEDI_CMD _IOR(CIO, 9, struct comedi_cmd)
 #define COMEDI_CMDTEST _IOR(CIO, 10, struct comedi_cmd)
-#define COMEDI_INSNLIST _IOR(CIO, 11, comedi_insnlist)
+#define COMEDI_INSNLIST _IOR(CIO, 11, struct comedi_insnlist)
 #define COMEDI_INSN _IOR(CIO, 12, struct comedi_insn)
 #define COMEDI_BUFCONFIG _IOR(CIO, 13, comedi_bufconfig)
 #define COMEDI_BUFINFO _IOWR(CIO, 14, comedi_bufinfo)
@@ -310,7 +310,6 @@ enum comedi_support_level {
 
 /* structures */
 
-typedef struct comedi_insnlist_struct comedi_insnlist;
 typedef struct comedi_chaninfo_struct comedi_chaninfo;
 typedef struct comedi_subdinfo_struct comedi_subdinfo;
 typedef struct comedi_devinfo_struct comedi_devinfo;
@@ -344,7 +343,7 @@ struct comedi_insn {
 	unsigned int unused[3];
 };
 
-struct comedi_insnlist_struct {
+struct comedi_insnlist {
 	unsigned int n_insns;
 	struct comedi_insn *insns;
 };
