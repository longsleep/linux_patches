From mithlesh@linsyssoft.com  Tue Feb  3 16:25:14 2009
From: Mithlesh Thukral <mithlesh@linsyssoft.com>
Date: Fri, 30 Jan 2009 20:20:19 +0530 (IST)
Subject: Staging: sxg: Cleanup the SXG driver of unused space and functions
To: Greg Kroah-Hartman <gregkh@suse.de>
Cc: Sahara Project <saharaproj@linsyssoft.com>, Michael Miles <mmiles@alacritech.com>, Christopher Harrer <charrer@alacritech.com>
Message-ID: <alpine.LFD.2.00.0901302019200.21202@localhost.localdomain>


Miscellaneous cleanups.
* Removed unwanted spaces/lines.
* Removed unused functions.

Signed-off-by: LinSysSoft Sahara Team <saharaproj@linsyssoft.com>
Signed-off-by: Mithlesh Thukral <mithlesh@linsyssoft.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/sxg/sxg.c         |   23 ++---------------------
 drivers/staging/sxg/sxg_ethtool.c |   12 +-----------
 2 files changed, 3 insertions(+), 32 deletions(-)

--- a/drivers/staging/sxg/sxg.c
+++ b/drivers/staging/sxg/sxg.c
@@ -137,7 +137,6 @@ void sxg_collect_statistics(struct adapt
 
 #if XXXTODO
 static int sxg_mac_set_address(struct net_device *dev, void *ptr);
-static void sxg_unmap_mmio_space(struct adapter_t *adapter);
 #endif
 static void sxg_mcast_set_list(struct net_device *dev);
 
@@ -3218,35 +3217,17 @@ static void sxg_mcast_set_list(struct ne
 	struct adapter_t *adapter = (struct adapter_t *) netdev_priv(dev);
 
 	ASSERT(adapter);
-	if (dev->flags & IFF_PROMISC) {
+	if (dev->flags & IFF_PROMISC)
 		adapter->MacFilter |= MAC_PROMISC;
-	}
-
         if (dev->flags & IFF_MULTICAST)
                 adapter->MacFilter |= MAC_MCAST;
-
-        if (dev->flags & IFF_ALLMULTI) {
+        if (dev->flags & IFF_ALLMULTI)
                 adapter->MacFilter |= MAC_ALLMCAST;
-	}
 
 	//XXX handle other flags as well
 	sxg_set_mcast_addr(adapter);
 }
 
-#if XXXTODO
-static void sxg_unmap_mmio_space(struct adapter_t *adapter)
-{
-#if LINUX_FREES_ADAPTER_RESOURCES
-/*
- *       if (adapter->Regs) {
- *              iounmap(adapter->Regs);
- *      }
- *      adapter->slic_regs = NULL;
- */
-#endif
-}
-#endif
-
 void sxg_free_sgl_buffers(struct adapter_t *adapter)
 {
         struct list_entry               *ple;
--- a/drivers/staging/sxg/sxg_ethtool.c
+++ b/drivers/staging/sxg/sxg_ethtool.c
@@ -159,7 +159,6 @@ sxg_nic_get_strings(struct net_device *n
 
 	switch(stringset) {
 	case ETH_SS_TEST:
-		/* return -EOPNOTSUPP; */
 		break;
 	case ETH_SS_STATS:
 		for (index = 0; index < SXG_NIC_STATS_LEN; index++) {
@@ -257,14 +256,6 @@ static void sxg_nic_get_regs(struct net_
 	memcpy((buff+sizeof(struct sxg_hw_regs)), UcodeRegs, sizeof(struct sxg_ucode_regs));
 }
 
-static void sxg_nic_get_wol(struct net_device *netdev,
-			    struct ethtool_wolinfo *wol)
-{
-	/* We dont support wake-on-lan */
-	wol->supported = 0;
-	memset(&wol->sopass, 0, sizeof(wol->sopass));
-}
-
 static int sxg_nic_get_eeprom_len(struct net_device *netdev)
 {
 	return (USER_VIEWABLE_EEPROM_SIZE);
@@ -315,10 +306,9 @@ struct ethtool_ops sxg_nic_ethtool_ops =
 	.get_regs_len = sxg_nic_get_regs_len,
 	.get_regs = sxg_nic_get_regs,
 	.get_link = ethtool_op_get_link,
-	.get_wol = sxg_nic_get_wol,
+//	.get_wol = sxg_nic_get_wol,
 	.get_eeprom_len = sxg_nic_get_eeprom_len,
 	.get_eeprom = sxg_nic_get_eeprom,
-//	.get_ringparam = sxg_nic_get_ringparam,
 //	.get_pauseparam = sxg_nic_get_pauseparam,
 //	.set_pauseparam = sxg_nic_set_pauseparam,
 	.set_tx_csum = ethtool_op_set_tx_csum,
