From foo@baz Thu Aug 20 12:15:54 PDT 2009
Date: Thu, 20 Aug 2009 12:15:54 -0700
To: Greg KH <greg@kroah.com>
From: Greg Kroah-Hartman <gregkh@suse.de>
Subject: Staging: hv: typedef removal from VmbusChannelInterface.h

It's all clean now.

Cc: Hank Janssen <hjanssen@microsoft.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---
 drivers/staging/hv/include/ChannelMessages.h       |    6 +++---
 drivers/staging/hv/include/VmbusChannelInterface.h |    6 ++----
 drivers/staging/hv/include/nvspprotocol.h          |    4 ++--
 3 files changed, 7 insertions(+), 9 deletions(-)

--- a/drivers/staging/hv/include/ChannelMessages.h
+++ b/drivers/staging/hv/include/ChannelMessages.h
@@ -89,7 +89,7 @@ typedef struct _VMBUS_CHANNEL_VERSION_SU
 typedef struct _VMBUS_CHANNEL_OFFER_CHANNEL
 {
     VMBUS_CHANNEL_MESSAGE_HEADER Header;
-    VMBUS_CHANNEL_OFFER Offer;
+    struct vmbus_channel_offer Offer;
     u32  ChildRelId;
     u8   MonitorId;
     bool MonitorAllocated;
@@ -131,12 +131,12 @@ typedef struct _VMBUS_CHANNEL_OPEN_CHANN
 
     /* GPADL for the channel's ring buffer. */
 
-    GPADL_HANDLE    RingBufferGpadlHandle;
+    u32 RingBufferGpadlHandle;
 
 
     /* GPADL for the channel's server context save area. */
 
-    GPADL_HANDLE    ServerContextAreaGpadlHandle;
+    u32 ServerContextAreaGpadlHandle;
 
 
     /*
--- a/drivers/staging/hv/include/nvspprotocol.h
+++ b/drivers/staging/hv/include/nvspprotocol.h
@@ -143,7 +143,7 @@ typedef struct _NVSP_1_MESSAGE_SEND_NDIS
 
 typedef struct _NVSP_1_MESSAGE_SEND_RECEIVE_BUFFER
 {
-    GPADL_HANDLE                            GpadlHandle;
+    u32 GpadlHandle;
     u16                                  Id;
 } NVSP_1_MESSAGE_SEND_RECEIVE_BUFFER, *PNVSP_1_MESSAGE_SEND_RECEIVE_BUFFER;
 
@@ -202,7 +202,7 @@ typedef struct _NVSP_1_MESSAGE_REVOKE_RE
 
 typedef struct _NVSP_1_MESSAGE_SEND_SEND_BUFFER
 {
-    GPADL_HANDLE                            GpadlHandle;
+    u32 GpadlHandle;
     u16                                  Id;
 } NVSP_1_MESSAGE_SEND_SEND_BUFFER, *PNVSP_1_MESSAGE_SEND_SEND_BUFFER;
 
--- a/drivers/staging/hv/include/VmbusChannelInterface.h
+++ b/drivers/staging/hv/include/VmbusChannelInterface.h
@@ -47,7 +47,7 @@
  * At the center of the Channel Management library is the Channel Offer. This
  * struct contains the fundamental information about an offer.
  */
-typedef struct {
+struct vmbus_channel_offer {
 	struct hv_guid InterfaceType;
 	struct hv_guid InterfaceInstance;
 	u64 InterruptLatencyIn100nsUnits;
@@ -75,9 +75,7 @@ typedef struct {
 		} Pipe;
 	} u;
 	u32 Padding;
-} __attribute__((packed)) VMBUS_CHANNEL_OFFER, *PVMBUS_CHANNEL_OFFER;
-
-typedef u32 GPADL_HANDLE;
+} __attribute__((packed));
 
 /* Server Flags */
 #define VMBUS_CHANNEL_ENUMERATE_DEVICE_INTERFACE	1
