From m.kozlowski@tuxland.pl  Wed Mar 11 14:36:28 2009
From: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date: Tue,  3 Mar 2009 19:38:37 +0100
Subject: Staging: comedi: remove LINUX_VERSION_CODE checks
To: gregkh@suse.de
Cc: m.kozlowski@tuxland.pl
Message-ID: <1236105518-19565-8-git-send-email-m.kozlowski@tuxland.pl>


Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Cc: Ian Abbott <abbotti@mev.co.uk>
Cc: Frank Mori Hess <fmhess@users.sourceforge.net>
Cc: David Schleef <ds@schleef.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>


---
 drivers/staging/comedi/drivers/addi-data/amcc_s5933_58.h |   18 ---------------
 drivers/staging/comedi/kcomedilib/ksyms.c                |    4 ---
 2 files changed, 22 deletions(-)

--- a/drivers/staging/comedi/drivers/addi-data/amcc_s5933_58.h
+++ b/drivers/staging/comedi/drivers/addi-data/amcc_s5933_58.h
@@ -251,11 +251,7 @@ void v_pci_card_list_init(unsigned short
 	amcc_devices = NULL;
 	last = NULL;
 
-#if LINUX_VERSION_CODE < 0x020300
-	for (pcidev = pci_devices; pcidev; pcidev = pcidev->next) {
-#else
 	pci_for_each_dev(pcidev) {
-#endif
 		if (pcidev->vendor == pci_vendor) {
 			amcc = kmalloc(sizeof(*amcc), GFP_KERNEL);
 			memset(amcc, 0, sizeof(*amcc));
@@ -268,18 +264,6 @@ void v_pci_card_list_init(unsigned short
 			}
 			last = amcc;
 
-#if LINUX_VERSION_CODE < 0x020300
-			amcc->vendor = pcidev->vendor;
-			amcc->device = pcidev->device;
-			amcc->master = pcidev->master;
-			amcc->pci_bus = pcidev->bus->number;
-			amcc->pci_slot = PCI_SLOT(pcidev->devfn);
-			amcc->pci_func = PCI_FUNC(pcidev->devfn);
-			for (i = 0; i < 5; i++)
-				amcc->io_addr[i] =
-				    pcidev->base_address[i] & ~3UL;
-			amcc->irq = pcidev->irq;
-#else
 			amcc->vendor = pcidev->vendor;
 			amcc->device = pcidev->device;
 #if 0
@@ -292,8 +276,6 @@ void v_pci_card_list_init(unsigned short
 				amcc->io_addr[i] =
 				    pcidev->resource[i].start & ~3UL;
 			amcc->irq = pcidev->irq;
-#endif
-
 		}
 	}
 
--- a/drivers/staging/comedi/kcomedilib/ksyms.c
+++ b/drivers/staging/comedi/kcomedilib/ksyms.c
@@ -40,8 +40,6 @@
 #include <linux/mm.h>
 #include <linux/slab.h>
 
-#if LINUX_VERSION_CODE >= 0x020200
-
 /* functions specific to kcomedilib */
 
 EXPORT_SYMBOL(comedi_register_callback);
@@ -140,5 +138,3 @@ EXPORT_SYMBOL(comedi_get_len_chanlist);
 
 /* alpha */
 //EXPORT_SYMBOL(comedi_set_global_oor_behavior);
-
-#endif
