From jmm@debian.org  Fri Jul 10 14:34:17 2009
From: Moritz Muehlenhoff <jmm@debian.org>
Date: Sun, 21 Jun 2009 22:43:46 +0200
Subject: Staging: wlan-ng: Drop the special case handling of older wireless extensions, WIRELESS_EXT is at 22 for the current kernel.
To: greg@kroah.com
Cc: Moritz Muehlenhoff <jmm@debian.org>
Message-ID: <1245617027-5671-3-git-send-email-jmm@debian.org>


Signed-off-by: Moritz Muehlenhoff <jmm@debian.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---
 drivers/staging/wlan-ng/p80211netdev.c |    3 ---
 drivers/staging/wlan-ng/p80211wext.c   |    8 --------
 2 files changed, 11 deletions(-)

--- a/drivers/staging/wlan-ng/p80211netdev.c
+++ b/drivers/staging/wlan-ng/p80211netdev.c
@@ -764,9 +764,6 @@ int wlan_setup(wlandevice_t *wlandev)
 		dev->ml_priv = wlandev;
 		dev->netdev_ops = &p80211_netdev_ops;
 
-#if (WIRELESS_EXT < 21)
-		dev->get_wireless_stats = p80211wext_get_wireless_stats;
-#endif
 		dev->wireless_handlers = &p80211wext_handler_def;
 
 		netif_stop_queue(dev);
--- a/drivers/staging/wlan-ng/p80211wext.c
+++ b/drivers/staging/wlan-ng/p80211wext.c
@@ -689,9 +689,6 @@ static int p80211wext_giwessid(netdevice
 		data->flags = 1;
 		memcpy(essid, wlandev->ssid.data, data->length);
 		essid[data->length] = 0;
-#if (WIRELESS_EXT < 21)
-		data->length++;
-#endif
 	} else {
 		memset(essid, 0, sizeof(wlandev->ssid.data));
 		data->length = 0;
@@ -724,11 +721,6 @@ static int p80211wext_siwessid(netdevice
 
 	msg.msgcode = DIDmsg_lnxreq_autojoin;
 
-#if (WIRELESS_EXT < 21)
-	if (length)
-		length--;
-#endif
-
 	/* Trim the last '\0' to fit the SSID format */
 	if (length && essid[length - 1] == '\0')
 		length--;
