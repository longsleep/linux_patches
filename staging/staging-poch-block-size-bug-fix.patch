From vijaykumar@bravegnu.org  Wed Oct 29 10:46:15 2008
From: vijaykumar@bravegnu.org
Date: Wed, 29 Oct 2008 08:58:32 +0530
Subject: Staging: poch: Block size bug fix
To: greg@kroah.com
Cc: jayakumar.lkml@gmail.com, alexey.zaytsev@gmail.com, robfitz@273k.net, bdonnette@linagora.com, htejun@gmail.com, <abixby@redrapids.com>
Message-ID: <20081029033332.221220980@bravegnu.org>


Block size is to be expressed in no. of 64 bit transfers. But the code
specifies the block size in bytes. Fix this issue.

Signed-off-by: Vijay Kumar <vijaykumar@bravegnu.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/poch/poch.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

--- a/drivers/staging/poch/poch.c
+++ b/drivers/staging/poch/poch.c
@@ -432,7 +432,10 @@ static void channel_dma_init(struct chan
 	}
 
 	printk(KERN_WARNING "block_size, group_size, group_count\n");
-	iowrite32(channel->block_size, fpga + block_size_reg);
+	/*
+	 * Block size is represented in no. of 64 bit transfers.
+	 */
+	iowrite32(channel->block_size / 8, fpga + block_size_reg);
 	iowrite32(channel->group_size / channel->block_size,
 		  fpga + block_count_reg);
 	iowrite32(channel->group_count, fpga + group_count_reg);
