From alan@linux.intel.com  Mon Oct 26 14:48:06 2009
From: Alan Cox <alan@linux.intel.com>
Date: Tue, 06 Oct 2009 15:47:29 +0100
Subject: Staging: et131x: Kill the NoPhyAccess variable
To: greg@kroah.com
Message-ID: <20091006144727.8604.2789.stgit@localhost.localdomain>


Another write once "variable"

Signed-off-by: Alan Cox <alan@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/et131x/et1310_tx.c      |    3 +--
 drivers/staging/et131x/et131x_adapter.h |    1 -
 drivers/staging/et131x/et131x_isr.c     |    3 ---
 3 files changed, 1 insertion(+), 6 deletions(-)

--- a/drivers/staging/et131x/et1310_tx.c
+++ b/drivers/staging/et131x/et1310_tx.c
@@ -368,8 +368,7 @@ int et131x_send_packets(struct sk_buff *
 		 * if( MP_SHOULD_FAIL_SEND( etdev ) ||
 		 *  etdev->DriverNoPhyAccess )
 		 */
-		if (MP_SHOULD_FAIL_SEND(etdev) || etdev->DriverNoPhyAccess
-		    || !netif_carrier_ok(netdev)) {
+		if (MP_SHOULD_FAIL_SEND(etdev) || !netif_carrier_ok(netdev)) {
 			dev_kfree_skb_any(skb);
 			skb = NULL;
 
--- a/drivers/staging/et131x/et131x_adapter.h
+++ b/drivers/staging/et131x/et131x_adapter.h
@@ -248,7 +248,6 @@ struct et131x_adapter {
 		NETIF_STATUS_MEDIA_DISCONNECT,
 		NETIF_STATUS_MAX
 	} MediaState;
-	u8 DriverNoPhyAccess;
 
 	/* Minimize init-time */
 	struct timer_list ErrorTimer;
--- a/drivers/staging/et131x/et131x_isr.c
+++ b/drivers/staging/et131x/et131x_isr.c
@@ -109,9 +109,6 @@ void et131x_enable_interrupts(struct et1
 	else
 		mask = INT_MASK_ENABLE_NO_FLOW;
 
-	if (adapter->DriverNoPhyAccess)
-		mask |= ET_INTR_PHY;
-
 	adapter->CachedMaskValue = mask;
 	writel(mask, &adapter->regs->global.int_mask);
 }
