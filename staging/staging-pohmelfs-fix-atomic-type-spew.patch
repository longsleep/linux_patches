From alan@linux.intel.com  Thu Aug 20 14:37:41 2009
From: Alan Cox <alan@linux.intel.com>
Date: Wed, 19 Aug 2009 17:52:02 +0100
Subject: Staging: pohmelfs: fix atomic type spew
To: greg@kroah.com, linux-kernel@vger.kernel.org
Message-ID: <20090819165201.14632.96567.stgit@localhost.localdomain>


atomic_long != atomic

Signed-off-by: Alan Cox <alan@linux.intel.com>
Cc: Evgeniy Polyakov <zbr@ioremap.net>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>


---
 drivers/staging/pohmelfs/inode.c |    2 +-
 drivers/staging/pohmelfs/net.c   |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/staging/pohmelfs/inode.c
+++ b/drivers/staging/pohmelfs/inode.c
@@ -1865,7 +1865,7 @@ static int pohmelfs_fill_super(struct su
 	INIT_LIST_HEAD(&psb->crypto_active_list);
 
 	atomic_set(&psb->trans_gen, 1);
-	atomic_set(&psb->total_inodes, 0);
+	atomic_long_set(&psb->total_inodes, 0);
 
 	mutex_init(&psb->state_lock);
 	INIT_LIST_HEAD(&psb->state_list);
--- a/drivers/staging/pohmelfs/net.c
+++ b/drivers/staging/pohmelfs/net.c
@@ -680,7 +680,7 @@ static int pohmelfs_root_cap_response(st
 		printk(KERN_INFO "Mounting POHMELFS (%d) "
 			"with extended attributes support.\n", psb->idx);
 
-	if (atomic_read(&psb->total_inodes) <= 1)
+	if (atomic_long_read(&psb->total_inodes) <= 1)
 		atomic_long_set(&psb->total_inodes, cap->nr_files);
 
 	dprintk("%s: total: %llu, avail: %llu, flags: %llx, inodes: %llu.\n",
