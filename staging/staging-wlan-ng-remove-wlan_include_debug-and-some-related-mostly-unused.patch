From jmm@debian.org  Fri Feb  6 15:57:07 2009
From: Moritz Muehlenhoff <jmm@debian.org>
Date: Thu,  5 Feb 2009 23:55:54 +0100
Subject: Staging: wlan-ng: Remove WLAN_INCLUDE_DEBUG and some related, mostly unused
To: greg@kroah.com
Cc: Moritz Muehlenhoff <jmm@debian.org>
Message-ID: <1233874558-10611-1-git-send-email-jmm@debian.org>


Signed-off-by: Moritz Muehlenhoff <jmm@debian.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/wlan-ng/hfa384x_usb.c  |    8 --------
 drivers/staging/wlan-ng/p80211netdev.c |    6 ------
 drivers/staging/wlan-ng/prism2mgmt.c   |    2 --
 drivers/staging/wlan-ng/prism2mgmt.h   |    1 -
 drivers/staging/wlan-ng/prism2mib.c    |    1 -
 drivers/staging/wlan-ng/prism2sta.c    |    7 -------
 drivers/staging/wlan-ng/wlan_compat.h  |   28 +++++-----------------------
 7 files changed, 5 insertions(+), 48 deletions(-)

--- a/drivers/staging/wlan-ng/hfa384x_usb.c
+++ b/drivers/staging/wlan-ng/hfa384x_usb.c
@@ -112,7 +112,6 @@
 
 /*================================================================*/
 /* System Includes */
-#define WLAN_DBVAR	prism2_debug
 
 #include <linux/version.h>
 
@@ -171,13 +170,6 @@ typedef enum cmd_mode CMD_MODE;
 #define ROUNDUP64(a) (((a)+63)&~63)
 
 /*================================================================*/
-/* Local Types */
-
-/*================================================================*/
-/* Local Static Definitions */
-extern int prism2_debug;
-
-/*================================================================*/
 /* Local Function Declarations */
 
 #ifdef DEBUG_USB
--- a/drivers/staging/wlan-ng/p80211netdev.c
+++ b/drivers/staging/wlan-ng/p80211netdev.c
@@ -135,12 +135,6 @@ int wlan_wext_write = 1;
 module_param(wlan_wext_write, int, 0644);
 MODULE_PARM_DESC(wlan_wext_write, "enable write wireless extensions");
 
-#ifdef WLAN_INCLUDE_DEBUG
-int wlan_debug=0;
-module_param(wlan_debug, int, 0644);
-MODULE_PARM_DESC(wlan_debug, "p80211 debug level");
-#endif
-
 /*================================================================*/
 /* Function Definitions */
 
--- a/drivers/staging/wlan-ng/prism2mgmt.c
+++ b/drivers/staging/wlan-ng/prism2mgmt.c
@@ -59,8 +59,6 @@
 
 /*================================================================*/
 /* System Includes */
-#define WLAN_DBVAR	prism2_debug
-
 
 #include <linux/if_arp.h>
 #include <linux/module.h>
--- a/drivers/staging/wlan-ng/prism2mgmt.h
+++ b/drivers/staging/wlan-ng/prism2mgmt.h
@@ -64,7 +64,6 @@
 /*=============================================================*/
 /*------ Static variable externs ------------------------------*/
 
-extern int	prism2_debug;
 extern int      prism2_reset_holdtime;
 extern int      prism2_reset_settletime;
 /*=============================================================*/
--- a/drivers/staging/wlan-ng/prism2mib.c
+++ b/drivers/staging/wlan-ng/prism2mib.c
@@ -52,7 +52,6 @@
 
 /*================================================================*/
 /* System Includes */
-#define WLAN_DBVAR	prism2_debug
 
 #include <linux/version.h>
 
--- a/drivers/staging/wlan-ng/prism2sta.c
+++ b/drivers/staging/wlan-ng/prism2sta.c
@@ -52,7 +52,6 @@
 
 /*================================================================*/
 /* System Includes */
-#define WLAN_DBVAR	prism2_debug
 
 #include <linux/version.h>
 #include <linux/module.h>
@@ -115,12 +114,6 @@ int	 prism2_reset_settletime=100;	/* Res
 
 static int	prism2_doreset=0;		/* Do a reset at init? */
 
-#ifdef WLAN_INCLUDE_DEBUG
-int prism2_debug=0;
-module_param( prism2_debug, int, 0644);
-MODULE_PARM_DESC(prism2_debug, "prism2 debugging");
-#endif
-
 module_param( prism2_doreset, int, 0644);
 MODULE_PARM_DESC(prism2_doreset, "Issue a reset on initialization");
 
--- a/drivers/staging/wlan-ng/wlan_compat.h
+++ b/drivers/staging/wlan-ng/wlan_compat.h
@@ -48,34 +48,20 @@
 #ifndef _WLAN_COMPAT_H
 #define _WLAN_COMPAT_H
 
+#undef netdevice_t
+typedef struct net_device netdevice_t;
+
 /*=============================================================*/
 /*------ OS Portability Macros --------------------------------*/
 /*=============================================================*/
 
-#ifndef WLAN_DBVAR
-#define WLAN_DBVAR	wlan_debug
-#endif
 
 #include <linux/hardirq.h>
 #include <linux/ctype.h>
 
-#if defined(WLAN_INCLUDE_DEBUG)
-	#define WLAN_HEX_DUMP( l, x, p, n)	if( WLAN_DBVAR >= (l) ){ \
-		int __i__; \
-		printk(KERN_DEBUG x ":"); \
-		for( __i__=0; __i__ < (n); __i__++) \
-			printk( " %02x", ((u8*)(p))[__i__]); \
-		printk("\n"); }
-
-	#define WLAN_LOG_DEBUG(l,x,args...) if ( WLAN_DBVAR >= (l)) printk(KERN_DEBUG "%s(%lu): " x ,  __func__, (preempt_count() & PREEMPT_MASK), ##args );
-#else
-	#define WLAN_HEX_DUMP( l, s, p, n)
+#define WLAN_HEX_DUMP( l, s, p, n)
 
-	#define WLAN_LOG_DEBUG(l, s, args...)
-#endif
-
-#undef netdevice_t
-typedef struct net_device netdevice_t;
+#define WLAN_LOG_DEBUG(l, s, args...)
 
 /*=============================================================*/
 /*--- General Macros ------------------------------------------*/
@@ -108,8 +94,4 @@ typedef struct net_device netdevice_t;
 /*--- Variables -----------------------------------------------*/
 /*=============================================================*/
 
-#ifdef WLAN_INCLUDE_DEBUG
-extern int wlan_debug;
-#endif
-
 #endif /* _WLAN_COMPAT_H */
