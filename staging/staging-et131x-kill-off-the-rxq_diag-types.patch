From alan@linux.intel.com  Wed Jan 27 15:45:29 2010
From: Alan Cox <alan@linux.intel.com>
Date: Mon, 18 Jan 2010 15:35:08 +0000
Subject: Staging: et131x: Kill off the rxq_diag types
To: greg@kroah.com
Message-ID: <20100118153508.6884.59893.stgit@localhost.localdomain>


Signed-off-by: Alan Cox <alan@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/staging/et131x/et1310_address_map.h |   23 ++++++-----------------
 drivers/staging/et131x/et131x_isr.c         |    2 +-
 2 files changed, 7 insertions(+), 18 deletions(-)

--- a/drivers/staging/et131x/et1310_address_map.h
+++ b/drivers/staging/et131x/et1310_address_map.h
@@ -863,23 +863,12 @@ typedef union _RXMAC_UNI_PF_ADDR3_t {
 /*
  * structure for Rx Queue Dialog reg in rxmac address map.
  * located at address 0x4090
+ *
+ * 31-26: reserved
+ * 25-16: rd_ptr
+ * 15-10: reserved
+ * 9-0: wr_ptr
  */
-typedef union _RXMAC_RXQ_DIAG_t {
-	u32 value;
-	struct {
-#ifdef _BIT_FIELDS_HTOL
-		u32 reserved2:6;	/* bits 26-31 */
-		u32 rd_ptr:10;	/* bits 16-25 */
-		u32 reserved1:6;	/* bits 10-15 */
-		u32 wr_ptr:10;	/* bits 0-9 */
-#else
-		u32 wr_ptr:10;	/* bits 0-9 */
-		u32 reserved1:6;	/* bits 10-15 */
-		u32 rd_ptr:10;	/* bits 16-25 */
-		u32 reserved2:6;	/* bits 26-31 */
-#endif
-	} bits;
-} RXMAC_RXQ_DIAG_t, *PRXMAC_RXQ_DIAG_t;
 
 /*
  * structure for space availiable reg in rxmac address map.
@@ -984,7 +973,7 @@ typedef struct _RXMAC_t {				/* Location
 	u32 pf_ctrl;					/*  0x4084 */
 	u32 mcif_ctrl_max_seg;				/*  0x4088 */
 	u32 mcif_water_mark;				/*  0x408C */
-	RXMAC_RXQ_DIAG_t rxq_diag;			/*  0x4090 */
+	u32 rxq_diag;					/*  0x4090 */
 	RXMAC_SPACE_AVAIL_t space_avail;		/*  0x4094 */
 
 	RXMAC_MIF_CTL_t mif_ctrl;			/*  0x4098 */
--- a/drivers/staging/et131x/et131x_isr.c
+++ b/drivers/staging/et131x/et131x_isr.c
@@ -446,7 +446,7 @@ void et131x_isr_handler(struct work_stru
 			dev_warn(&etdev->pdev->dev,
 				    "Enable 0x%08x, Diag 0x%08x\n",
 				    readl(&iomem->rxmac.ctrl.value),
-				    readl(&iomem->rxmac.rxq_diag.value));
+				    readl(&iomem->rxmac.rxq_diag));
 
 			/*
 			 * If we are debugging, we want to see this error,
